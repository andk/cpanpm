2006-01-21  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* document and provide a dialog for commandnumber_in_prompt or provide a
	sprintf based solution

2006-01-18  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Foreign Bug: RDF::Simple has LWP::UserAgent as undeclared prereq???

2006-01-17  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* rt #17089 suggests that we have to care for M:B being installed when
	we find a distro that has only a Build.PL and no Makefile.PL

	AFAIR only CPAN::Metadata::RDF is a module that comes with Build.PL and
	without Makefile.PL, so it is the only one to test the bugreport. This
	takes *quite* a while because of prerequisites (Class::MethodMaker,
	Template::Toolkit, DateTime::TimeZone, DBD::SQLLite, LWP, etc.). And of
	course after all the prerequisites, we HAVE Module::Build, so must
	remove it again. FIXED in rev. 433

	* Foreign Bug? I must investigate DateTime::TimeZone separately. It
	wanted to install Module::Build on its own and then failed giving as a
	reason that Module::Build was not installed???

2006-01-13  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Todo: Write a bunch of distros and upload them with the sole purpose
	of testing CPAN.pm. Also helps Test::Prereq and others.
	PITA::Test::Dummy::Perl5::Make and PITA::Test::Dummy::Perl5::Build? A
	start is done in t/shell.t

	* upgrade: new command that does nothing but
	CPAN::Shell->install(CPAN::Shell->r)?

	* DBM::Deep for a hash behind $CPAN::META. See 2005-12-28 for issues and
	branches/1.80_56plus for a few lines that probably went in the wrong
	direction. Split the loading of Authors/Modules/Distros/Bundles into
	separate pieces and make them lazy. Consider 'reload index', the
	storable Metadata file, readonly/readwrite, changes of the DSLIP thingy,
	offsets into an uncompressed 02xxx file. Remember RT #4943. Remove the
	code for "status" when finished

	* readline: offer the choice between Gnu and Perl

	* Bug: installing scripts without modules? How does it work? How
	should it work? getting the latest version ad-hoc?

	* Jim Cromie suggests: tweak shell to allow cpan> o conf init @sections
	tweak FirstTime::init() interface to accept optional @sections

	put various interactive Qs into groups of conditionals: if ( !@sections
	     or grep /$this_sect_name/, @sections)

	candidate sections: progs - external prog selection make - all make
	options

	* hr ================ no todos below this line ================ /hr
	
	* Bug: when ~/.cpan/sources/authors/id/A/AN/ANDK/CPAN-1.83_54.tar.gz is
	not a tar file (because I mistyped a URL and got something else), then
	even "force get ANDK/CPAN-1.83_54.tar.gz" does not overwrite the bogus
	file. The stupid program just keeps complaining that the file is not a
	tarfile and I must remove it manually.

	Ahh, this bug needs not be fixed because it only happens when you have
	no Digest::SHA available. REJECT

	* Bug: $CPAN_config_loaded should be replaced with something like
	$INC{"CPAN/Config.pm"} || $INC{"CPAN/MyConfig.pm"} so that loading one
	of the two before starting the shell will do. Then revert patch 411.
	FIXED in rev. 418

	* Todo: see the newest cpan by brian. DONE (BDFOY/cpan-1.51.tar.gz)

2006-01-12  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Bug: We cannot determine the prereequisites of File::Find::Rule
	because we have no YAML installed and Richard uses Module::Build, so we
	have no Makefile to parse. There is some MB interface to get them. fixed
	in rev. 396

	* Bug: "install Bundle::CPAN Expect Test::Pod" currently failes
	correctly when we reach YAML because we cannot verify the signature. But
	we must not die, we must only set the correct status so the rest of the
	gang can be installed. Fixed in rev. 384

2006-01-11  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* what happens to "failed" when we reload the index? TESTED OK

	* force: I'd expect 'force ls' to always fetch fresh CHECKSUMS
	files. Currently it doesn't. FIXED in rev. 401

	* optimize "ls dowens": currently fetches D/CHECKSUMS and D/DO/CHECKSUMS
	even if we already have D/DO/DOWENS/CHECKSUMS. Is it worth fixing? NO

	* get rid of the summary currently provided by install bundle, its
	superceded by failed(). REJECT, maybe it's useful

	* Todo: document "failed" (and "status"?) DONE for failed, REJECT for status

	* today's rev. 374 of CPAN.pm should be partially reverted: while
	failed() looks good most of the time, it looks ugly that 'force install
	version' installs version and still failed reports:

Writing /usr/local/perl-5.8.0@26774/lib/site_perl/5.9.3/i686-linux-64int/auto/version/vxs/.packlist
  ./Build install --uninst 1 -- OK
Failed installations in this command:
  JPEACOCK/version-0.53.tar.gz                 : make_test NO

cpan> failed               
Failed installations in this session:
  BDFOY/Test-Prereq-1.029.tar.gz               : make_test NO
  JPEACOCK/version-0.53.tar.gz                 : make_test NO

	Correct behaviour should be that the 'make_test NO' bit be nuked. FIXED
	in rev. 387

	Above that, the "prompt" change was only interesting during debugging.
	Nobody wants to see the internal number of commands in his prompt. FIXED
	in rev. 388

	* Bug: YAML fails to unpack because of bad signature. Retrying leads to
	prereq Test::Base failing due to bad signature. Retrying leads to
	running make test on YAML. dump reveals that somehow SIG_STATUS was set
	to YES. Ahh, that's the signature on the CHECKSUMS file. Need a new
	attribute for broken signatures. FIXED in rev. 374

2006-01-09  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* document CPAN_SHELL_LEVEL DONE

	* find out why Expect is so noisy and when this did start DONE

	* Slaven suggests: How to discover that we are in the subshell?
	Environment? Prompt? Level? PS1 as an environment variable? How does
	Debian's apt-get solve that? HALF-DONE in rev. 360: We now have the
	envariable CPAN_SHELL_LEVEL but I'd still like to make a change to the
	prompt. Update: Debian does not mangle the prompt, they just say 'Type
	exit when you're done':

	*** dvorak (Y/I/N/O/D/Z) [default=N] ? z
Type `exit' when you're done.
Abstaining from writing .zhistory, is younger than stats.dbhash at /root/bin/commandhistory.pl line 513.
Zsh version 4.3.0-dev-2
Linux dev05 2.6.12.6-xen0 #2 Tue Jan 10 17:34:37 CET 2006 i686 GNU/Linux

	So this Todo can also be CLOSED.

	* Rename Releasenotes to Changes and make the ChangeLog in the
	traditional format, there is some XSLT stylesheet somewhere that does
	this. Ah here: http://ch.tudelft.nl/~arthur/svn2cl/svn2cl-0.5.tar.gz
	DONE up to rev. 352

2006-01-01  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Give every command a number and store that number in the object,
	something like incommandcolor but without removing it at the end of the
	command. With such a number we can make failed(commandnumber) filter on
	that commandnumber and have instant per-command-failed. DONE in rev 374

2005-12-31  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Bug: I install Archive::Extract and it has the prerequisite
	Module::Load::Conditional declared but nobody installs it.
	FIXED in rev. 329

2005-12-30  Andreas J Koenig  <akoenig@cellular.de>

	* FirstTime needs a structure over each question or questiongroup so
	that we can ask single questions. Structure was brought by Jim Comie
	around rev. 355

	* Bug: "reload cpan" does not work if the old and the new CPAN.pm
	have a different path. I installed a new CPAN.pm from CPAN and it
	did remove the old /usr/share/perl/5.8/CPAN.pm but installed the
	new one as /usr/local/share/perl/5.8.7/CPAN.pm. The reload then
	always just said "0 subroutines redefined". FIXED in rev. 321

	* rev 315 fixed a path/permission problem with the use of basename() and
	I could see that the error message gets much better than before but we
	need a test case that shows that this strategy can really work in some
	cases. Maybe we need to store the tar file somewhere else to keep the
	tmp/ directory tidy. Also we must see what happens when we cannot remove
	the tmp/ directory. The list of broken distros in
	eg/find-module-install-sudo-bugs.pl will help. DONE

	* add eg/ to the MANIFEST? Not yet, the script is too much focused on a
	problem that is not of interest to others. REJECT

	* Bug: checksum mismatch on a file is being reported even when the
	file has 0 bytes. 0 bytes should clearly constitute the right/the
	duty to overwrite. FIXED in rev. 320

2005-12-29  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Bug suspected in Module::Install: it seems to run CPAN.pm in a
	subshell with sudo and so we get directories under build/ that we do not
	own. No release before this bug is traced down! Bugreport sent to Audrey
	a few minutes ago (already Friday, 0:30 Berlin time). Bug confirmed and
	has already been fixed in 0.37 and old distros must be redistroed. DONE

	* branching and merging: make current HEAD a branch "1.80_56plus" and
	roll HEAD back to contain only the zero-risk stuff (for maybe later
	releasing that as 1.81?) DONE

2005-12-21  Andreas J Koenig  <akoenig@cellular.de>

	* complete 'o conf' does not show commit. FIXED in rev 291

	* Bug: Module::Install writes into META.yml "perl: 5.004" and we take it
	as a Module requirement. Whose bug? WORKAROUND in rev 290

	* Can't locate object method "prettyprint" via package "CPAN::Config" at
	lib/CPAN.pm line 1246, <STDIN> line 2. FIXED in rev 288

2005-12-19  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Documentation of sudo, ls *, Module::Build, bzip2, YAML; DONE

	* Sudo for Build? Ask mailinglist if we need a
	build_install_build_command or what we need there. DONE

2005-12-18  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* add to the Bundle: YAML, Text::Glob, Module::Build, Digest::SHA FIXED in rev 280

	* 'make release' is broken. Apparently I have to follow some sequence to
	make release:-( MAYBE FIXED

	* Bug: The following prints "incommandcolor" which should never happen:

perl -Ilib -MCPAN -e 'CPAN::Shell->$_("MARKSTOS/Test-XML-Valid-0.04.tar.gz") for qw(clean d);'
CPAN: LWP::UserAgent loaded ok
CPAN: URI::URL loaded ok
Going to read /home/ftp/pub/CPAN/authors/01mailrc.txt.gz
CPAN: Compress::Zlib loaded ok
Going to read /home/ftp/pub/CPAN/modules/02packages.details.txt.gz
  Database was generated on Sun, 18 Dec 2005 00:23:31 GMT
Going to read /home/ftp/pub/CPAN/modules/03modlist.data.gz
CPAN: Storable loaded ok
Going to write /home/k/.cpan/Metadata
Running make clean
  Has no own directory
Distribution id = M/MA/MARKSTOS/Test-XML-Valid-0.04.tar.gz
    CPAN_USERID  MARKSTOS (Mark Stosberg <mark@summersault.com>)
    CALLED_FOR   M/MA/MARKSTOS/Test-XML-Valid-0.04.tar.gz
    CONTAINSMODS Test::XML::Valid
    UPLOAD_DATE  2004-06-01
    incommandcolor 0

	FIXED in rev 279

2005-12-17  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* make selectable in the config if M:B should be chosen over
	Makefile.PL. prefer_installer DONE in rev 271

	* Bug: tolerance on colon only works with m command but not with install command:

cpan> install Class:Container
CPAN: Storable loaded ok
Going to read /root/.cpan/Metadata
  Database was generated on Sat, 17 Dec 2005 10:06:33 GMT
Warning: Cannot install Class:Container, don't know what it is.
Try the command

    i /Class:Container/

to find objects with matching identifiers.

cpan> m Class:Container      
Module id = Class::Container
    CPAN_USERID  KWILLIAMS (Ken Williams <ken@mathforum.org>)
    CPAN_VERSION 0.12
    CPAN_FILE    K/KW/KWILLIAMS/Class-Container-0.12.tar.gz
    MANPAGE      Class::Container - Glues object frameworks together transparently
    INST_FILE    /usr/local/share/perl/5.8.7/Class/Container.pm
    INST_VERSION 0.12

	FIXED in rev 269

	* switch back and forth between preferring Build.PL or Makefile.PL; find
	12 modules that are good for testing Module::Build:

	SVN::Notify::Mirror  failed a test with "could not exec svnnotify" but it
                       worked on the commandline

	SVN::Notify::Config  is the whole family of SVN::Notify a mess, dependency-wise?

	SVN::Notify          must be installed first???

	Text::Lorem HTTP::Proxy Workflow Calendar::Simple DateTime::HiRes
	CGI::Wiki::Kwiki Class::Container HTML::TagCloud
	Data::FormValidator::Util::HTML

	DONE for rev 269

2005-12-15  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Bug: what? we still do not support Build.PL? Didn't anybody send
	me a patch? Try 'install CPAN::Metadata::RDF' and see how this can
	be fixed as quickly as possible.

	Try:        look CPAN::Metadata::RDF
	then there: perl Build.PL;./Build;./Build install

	This does nothing for the prerequisites. We could lookup META.yml either
	then or beforehand. FIXED although only minimal tested in rev 269

	* YAML for dependency checking in rev 268

	* bz2 support: testobject is ARTURAZ/Net-Vypress-Chat-0.72.1.tar.bz2
	DONE in rev 264

	* Todo: sha256 DONE in rev 263

	* Todo: 4th colmn in the 'r' command has not the canonical name
	but the unneeded D/DC/ stuff. DONE in rev 262.

	* Globbing on the ls command: completion? REJECTED

2005-12-12  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Feature request: if I type 'm CGI:Session' (note the missing second
	colon) I get

	No objects of type Module found for argument CGI:Session

	I believe, CPAN could supply the missing colon in this case. DONE

2005-11-30  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Bug: when the Metadata file has been read with the old version and
	CPAN reads the new index it does not update the version. Witness
	Crypt::Khazad. Once the Metadata are removed completely and built up
	correctly, everything is OK.

	Can be tested by running

	!print $CPAN::META->{readonly}{"CPAN::Module"}{"Crypt::Khazad"}{"CPAN_VERSION"} = "1.0"
	reload index

	This may have nothing to do with multidot versions, just some
	pessimization in the code dealing with replacement of META when
	re-reading index files. FIXED

2005-11-22  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* From: David Golden <david@hyperbolic.net>:

	> Also, "lack of distname support" is overblowing the situation.
	> Distnames are supported perfectly fine as long as you put it in the
	> proper syntax with author's ID and version.
	
	I think the problem Jim encountered is that "proper syntax" is part of
	the arcana of CPAN.  It's not obvious from the help:
	
	>  a,b,d,m  WORD or /REGEXP/  about authors, bundles, distributions, modules
	>  i        WORD or /REGEXP/  about anything of above
	>  r        NONE              reinstall recommendations
	>  ls       AUTHOR            about files in the author's directory
	
	Something that clarifies that AUTHOR/DIST-VERSION is a valid format
	would help.  Or rather, some specific example of what that WORD can be:
	
	  where WORD is either a module, bundle or author name or a
	  distribution name of the form AUTHOR/DISTRIBUTION-VERSION
	
	It's vaguely alluded to in the CPAN perldoc, but only in the section
	describing the four CPAN::* classes.
	
	A doc patch would be a quick fix for this.

2005-11-07  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* globbing on the ls command: only ls 'GBARR/Scalar*', or even 'ls
	*/makepatch'? 2005-12-12: DONE 

	* script to copy relevant files to the perl tree. DONE

2005-11-04  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* is version in script/cpan OK? It was 1.3 in perl @25981! Same
	for Nox.pm FIXED

	* PAUSE key 2005? DONE

2005-11-03  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Need Releasenotes, the ChangeLog is a big mess with the numerous
	checkins that all were just testing the release cycle itself and
	not generating anything useful for the user. DONE

2005-11-02  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Bug: why did the release only contain a ChangeLog up to release
	206 when we were at 212? Ah, I see, the disttest target does not
	make a to-be-released file, must be done by make dist. So the
	whole release was @206. No harm done because between 206 and 212 I
	only worked on the release target. I think I need a disttest of my
	own that takes the dist.tar.gz already built and tests it, not the
	one that builds a dist from the air again into the air and tests
	that. I want a real test of that file that is going to be
	released. Then I can live with 'make release' running both dist
	and disttest. I think. DONE
	
	* Bug: as a non-root user and first-time caller (no ~/.cpan/
	directory) I said "not ready for interactive configuration" and
	then said 'o conf init'. I got no questions asked but into a fast
	endless loop like so:

(1) Africa
(2) Asia
(3) Central America
(4) Europe
(5) North America
(6) Oceania
(7) South America
Select your continent (or several nearby continents) []

Sorry! since you don't have any existing picks, you must make a
geographic selection.

(1) Africa
(2) Asia
(3) Central America
(4) Europe
(5) North America
(6) Oceania
(7) South America
Select your continent (or several nearby continents) []

Sorry! since you don't have any existing picks, you must make a
geographic selection.


	until I hot ^C. *Very* Clever tricks with prompt?

	Reproducable as described. Leaving the shell and entering it again
	make it not reproducable. I must 'rm -rf ~/.cpan
	lib/CPAN/Config.pm' to reproduce. FIXED in rev 214

2005-10-28  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

2005-10-21  Andreas J Koenig  <akoenig@cellular.de>

	* cpan> m Apache::AuthAny 
	Can't call method "upload_date" on an undefined value at /usr/perl-5.8.4/lib/5.8.4/CPAN.pm line 5761.

	FIXED in rev 186.

	* Slaven suggests a variable "permanently_connected" that helps to
	decide if a connection to the internet is available. Do ask the
	community if people care about such stuff. Slaven expects, some
	will care that the the 'm' and 'd' commands now make a connection
	to the internet. FIXED by introducing do_ls_on_m_and_d.

2005-10-20  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* ChangeLog needs to be written by svn during make dist, and the
	dependencies must care for a rerun of 'perl Makefile.PL' when
	CPAN.pm gets edited. This would be 'svn log -r HEAD:131' for the
	ChangeLog, I think. FIXED

2005-10-18  Andreas J. Koenig  <andreas.koenig.gmwojprw@franz.ak.mind.de>

	* Bug: installing SWETH/IPv4.pm did not seem to work anymore.
	FIXED in revision 172.

	* Bug: there is a directory ZTANG/Text-PORE-102/ on CPAN with a
	single file README in it. ls chokes on ZTANG because of this. Is
	it a bug that the directory exists or is it a bug that it has no
	CHECKSUMS file? FIXED by simply removing the README file from
	CPAN.

2005-10-12  Andreas J Koenig  <akoenig@cellular.de>

	* Bug: the nonsense command 'force ls andk' should just do a plain
	'ls andk'. Instead it complains: C<Warning: Cannot ls andk, don't
	know what it is.> FIXED in rev. 180

2005-10-11  Andreas J Koenig  <akoenig@cellular.de>

	* Bug: "o conf foo bar" should complain about invalid key "foo".
	It does instead set "foo" to "bar" and it happened to me to set
	"debug" to "all" and then I wondered why debugging was not turned
	on. Would it have complained, I would have found the correct
	command ("o debug all") much quicker. FIXED in rev. 178.

	* Same effect can be illustrated by changing to the source's root
	directory, running 'perl -Ilib -MCPAN -e shell', 'install
	Tie::CPHash' (or something else???) and then 'reload cpan'....
	Ahhh, this latter example it is a matter of somebody having turned
	off $^W globally:-)...FIXED

2003-08-13  Andreas J Koenig

	cpan script should accept arguments as suggested by Matt Sergeant:
	   cpan install My::Foo
	
	Cache manager should read youngest directories first and start
	deleting without measuring as soon as the cache limit is reached.
	
	Rename 'o conf' to 'set' and 'o debug' to 'set debug'.
	
	Profiling?
	
	Provide something, so that the next "o conf commit" will not overwrite
	the config file. maybe "myconfig_readonly"?
	
	I have a patch by Jochen Wiedmann that implements a per-distribution
	permanent configuration directory. The new containsmods() method in
	1.52 should help to fit the patch with the rest of CPAN.pm.
	
	Option to skip testing (Ask Bjoern Hansen).
	
	Default Argument for make,test,look,etc. could be the last argument???
	
	Make a preferred download method configurable (allow further download
	methods via plugin?)
	
	Allow different site preferences for index files and other files
	
	Replace make with Make
	
	Maintain the cache at runtime. Currently we only check it at startup.
	
	Distribute compressed CHECKSUM files
	
	Security layer
	
	make plugins configurable, adjust @ISA
	
	Make configurable that multiple additional index files can be
	integrated (for Intra-CPANs). I believe CPAN::Site did it right
	anyway, so we might skip this.
	
	Make the 'make' command itself configurable as suggested by Rujith de
	Silva <rujith.desilva@ps.net>, who wants to run 'sudo make install'
	instead of 'make install'. (Fixing this is delayed, because it
	interacts with Make.pm)
	
	Local Variables:
	mode: change-log
	change-log-default-name: "Todo"
	tab-width: 2
	left-margin: 2
	End:
